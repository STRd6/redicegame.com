!!!
%html
  = partial "head"

  %body
    #container
      .inner
        = partial "header"

        = yield

        = partial 'footer'

    = yield_content :scripts
    = javascript_include_tag "https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"

    :coffeescript
      $("form").on "submit", ->
        $form = $(this)
        console.log $form.serialize()

        email = $form.find("[type=email]").val().trim()
        emailValidator = /.+\@.+\..+/ # Allows all emails similar to xxx@yyy.zzz
        valid = email.match(emailValidator)

        if valid
          $form.replaceWith("<p>Thanks, we'll keep you up to date with information about the game!</p>")

          url = $form.attr("action") + "?callback=?"
          $.getJSON url, $form.serialize()

        else
          $form.find('.error').text "Please enter a valid email address."

        return false
